{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "A stacked bar chart comparing Matured vs. Immature CPO area by individual state, ranked by total area.",
  "background": "transparent",
  "width": 370,
  "height": 320,
  "data": {
    "url": "https://raw.githubusercontent.com/bbb9888/3179/refs/heads/main/DV2/palm_maturity.csv"
  },
  "transform": [
    {
      "fold": ["Matured", "Immature"],
      "as": ["Type", "Hectares"]
    }
  ],
  "mark": "bar",
  "encoding": {
    "y": {
      "field": "State",
      "type": "nominal",
      "title": "State",
      "sort": {"field": "Total", "op": "sum", "order": "descending"}
    },
    "x": {
      "field": "Hectares",
      "type": "quantitative",
      "title": "Area (Hectares)",
      "stack": "zero",
      "axis": {"format": ",.0f"}
    },
    "color": {
      "field": "Type",
      "type": "nominal",
      "scale": {
        "domain": ["Matured", "Immature"],
        "range": ["#009E73", "#E69F00"]
      },
      "legend": {"title": "Plantation Status"}
    },
    "tooltip": [
      {"field": "State", "type": "nominal"},
      {"field": "Type", "type": "nominal", "title": "Status"},
      {"field": "Hectares", "type": "quantitative", "format": ",.0f", "title": "Area (Ha)"}
    ]
  },
  "config": {
    "bar": {"orient": "horizontal"},
    "view": {"stroke": null}
  }
}
